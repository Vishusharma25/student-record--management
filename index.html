<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Student Management System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="app">
        <!-- Top Bar -->
        <header class="topbar">
            <div class="topbar-left">
                <span class="logo">ðŸŽ“ SMS</span>
                <span class="topbar-title">Student Management System</span>
            </div>
            <div class="topbar-right">
                <button id="theme-toggle" class="btn-icon" title="Toggle Dark/Light Mode" aria-label="Toggle theme">
                    <span class="theme-icon">ðŸŒ™</span>
                </button>
                <span id="current-role-label" class="badge badge-role">Guest</span>
                <button id="logout-btn" class="btn btn-secondary small hidden">Logout</button>
            </div>
        </header>

        <!-- Auth Screen -->
        <main id="auth-screen" class="center-screen">
            <div class="card auth-card">
                <h2>Login</h2>
                <p class="muted">Select role and enter credentials</p>
                <div class="form-group">
                    <label for="role-select">Role</label>
                    <select id="role-select">
                        <option value="admin">Admin</option>
                        <option value="teacher">Teacher</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="username-input">Username</label>
                    <input id="username-input" type="text" placeholder="admin / teacher">
                </div>
                <div class="form-group">
                    <label for="password-input">Password</label>
                    <input id="password-input" type="password" placeholder="admin123 / teacher123">
                </div>
                <button id="login-btn" class="btn btn-primary full-width">Login</button>
                <p id="auth-error" class="error-text"></p>
            </div>
        </main>

        <!-- Main App Screen -->
        <main id="main-screen" class="hidden">
            <!-- Sidebar navigation -->
            <aside class="sidebar">
                <nav>
                    <button class="nav-link active" data-section="dashboard-section">Dashboard</button>
                    <button class="nav-link" data-section="students-section">Students</button>
                    <button class="nav-link" data-section="attendance-section">Attendance</button>
                    <button class="nav-link" data-section="academics-section">Academics</button>
                    <button class="nav-link" data-section="fees-section">Fees</button>
                    <button class="nav-link admin-only" data-section="settings-section">Settings</button>
                </nav>
            </aside>

            <!-- Content sections -->
            <section class="content">
                <!-- Dashboard -->
                <div id="dashboard-section" class="section visible">
                    <h2>Dashboard</h2>
                    <div class="grid stats-grid">
                        <div class="card stat-card">
                            <div class="stat-label">Total Students</div>
                            <div id="stat-total-students" class="stat-value">0</div>
                        </div>
                        <div class="card stat-card">
                            <div class="stat-label">Average GPA</div>
                            <div id="stat-avg-gpa" class="stat-value">0.00</div>
                        </div>
                        <div class="card stat-card">
                            <div class="stat-label">Average Attendance (%)</div>
                            <div id="stat-avg-attendance" class="stat-value">0</div>
                        </div>
                        <div class="card stat-card">
                            <div class="stat-label">Total Outstanding Fees</div>
                            <div id="stat-total-due" class="stat-value">0</div>
                        </div>
                    </div>
                </div>

                <!-- Students -->
                <div id="students-section" class="section">
                    <div class="section-header">
                        <h2>Students</h2>
                        <div id="student-actions-admin" class="actions-group">
                            <button id="btn-add-student" class="btn btn-primary">+ Add Student</button>
                            <button id="btn-clear-students" class="btn btn-danger">Clear All</button>
                        </div>
                    </div>

                    <div class="grid two-cols">
                        <!-- Student form -->
                        <div class="card" id="student-form-card">
                            <h3 id="student-form-title">Add Student</h3>
                            <form id="student-form">
                                <input type="hidden" id="student-id">
                                <div class="form-group">
                                    <label>Full Name</label>
                                    <input type="text" id="student-name" required>
                                </div>
                                <div class="form-group">
                                    <label>Roll Number</label>
                                    <input type="text" id="student-roll" required>
                                </div>
                                <div class="form-group">
                                    <label>Course</label>
                                    <input type="text" id="student-course" placeholder="B.Tech, BCA, MCA, etc.">
                                </div>
                                <div class="form-group">
                                    <label>Semester/Year</label>
                                    <input type="text" id="student-semester" placeholder="1st, 2nd, etc.">
                                </div>
                                <div class="form-group">
                                    <label>Date of Birth</label>
                                    <input type="date" id="student-dob">
                                </div>
                                <div class="form-group">
                                    <label>Gender</label>
                                    <select id="student-gender">
                                        <option value="">Select</option>
                                        <option>Male</option>
                                        <option>Female</option>
                                        <option>Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Phone</label>
                                    <input type="text" id="student-phone">
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" id="student-email">
                                </div>
                                <div class="form-group">
                                    <label>Parent Phone</label>
                                    <input type="text" id="student-parent-phone">
                                </div>
                                <div class="form-group">
                                    <label>Address</label>
                                    <textarea id="student-address" rows="2"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Blood Group</label>
                                    <input type="text" id="student-blood">
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">Save</button>
                                    <button type="button" id="student-form-cancel"
                                        class="btn btn-secondary">Cancel</button>
                                </div>
                                <p id="student-form-error" class="error-text"></p>
                            </form>
                        </div>

                        <!-- Student list -->
                        <div class="card">
                            <div class="list-header">
                                <div class="form-group inline">
                                    <label>Search</label>
                                    <input type="text" id="student-search" placeholder="Search by name or roll">
                                </div>
                                <div class="form-group inline">
                                    <label>Course</label>
                                    <input type="text" id="student-filter-course" placeholder="Filter by course">
                                </div>
                                <div class="form-group inline">
                                    <label>Semester</label>
                                    <input type="text" id="student-filter-semester" placeholder="Filter by semester">
                                </div>
                            </div>
                            <div class="table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Roll</th>
                                            <th>Name</th>
                                            <th>Course</th>
                                            <th>Sem</th>
                                            <th>GPA</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="students-table-body">
                                    </tbody>
                                </table>
                                <p id="students-empty" class="empty-text">No students found.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Attendance -->
                <div id="attendance-section" class="section">
                    <div class="section-header">
                        <h2>Attendance</h2>
                    </div>
                    <div class="grid two-cols">
                        <div class="card">
                            <h3>Mark Attendance</h3>
                            <div class="form-group">
                                <label>Date</label>
                                <input type="date" id="att-date">
                            </div>
                            <div class="form-group">
                                <label>Course</label>
                                <input type="text" id="att-course-filter" placeholder="Course to filter">
                            </div>
                            <div class="form-group">
                                <label>Semester</label>
                                <input type="text" id="att-semester-filter" placeholder="Semester to filter">
                            </div>
                            <button id="att-load-students" class="btn btn-primary full-width">Load Students</button>
                            <div id="att-list-wrapper" class="att-list-wrapper hidden">
                                <h4>Mark Present / Absent</h4>
                                <div id="att-students-list"></div>
                                <button id="att-save" class="btn btn-primary full-width">Save Attendance</button>
                                <p id="att-status" class="success-text"></p>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Attendance Summary (per student)</h3>
                            <div class="form-group inline">
                                <label>Roll</label>
                                <input type="text" id="att-summary-roll" placeholder="Enter roll number">
                            </div>
                            <button id="att-show-summary" class="btn btn-secondary small">Show</button>
                            <div id="att-summary-result" class="summary-box"></div>
                        </div>
                    </div>
                </div>

                <!-- Academics -->
                <div id="academics-section" class="section">
                    <div class="section-header">
                        <h2>Academics</h2>
                    </div>
                    <div class="grid two-cols">
                        <div class="card">
                            <h3>Subjects</h3>
                            <form id="subject-form">
                                <div class="form-group">
                                    <label>Course</label>
                                    <input type="text" id="sub-course" required>
                                </div>
                                <div class="form-group">
                                    <label>Semester</label>
                                    <input type="text" id="sub-semester" required>
                                </div>
                                <div class="form-group">
                                    <label>Subject Name</label>
                                    <input type="text" id="sub-name" required>
                                </div>
                                <div class="form-group">
                                    <label>Max Marks</label>
                                    <input type="number" id="sub-max" required>
                                </div>
                                <button type="submit" class="btn btn-primary full-width">Add Subject</button>
                            </form>
                            <div class="table-wrapper small-table">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Course</th>
                                            <th>Sem</th>
                                            <th>Subject</th>
                                            <th>Max</th>
                                        </tr>
                                    </thead>
                                    <tbody id="subjects-table-body"></tbody>
                                </table>
                                <p id="subjects-empty" class="empty-text">No subjects defined.</p>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Marks & GPA</h3>
                            <div class="form-group">
                                <label>Student Roll</label>
                                <input type="text" id="marks-roll" placeholder="Enter roll">
                            </div>
                            <div class="form-group">
                                <label>Course</label>
                                <input type="text" id="marks-course">
                            </div>
                            <div class="form-group">
                                <label>Semester</label>
                                <input type="text" id="marks-semester">
                            </div>
                            <button id="marks-load" class="btn btn-secondary full-width">Load Subjects</button>
                            <div id="marks-wrapper" class="hidden">
                                <div id="marks-inputs"></div>
                                <button id="marks-save" class="btn btn-primary full-width">Save Marks</button>
                                <div id="marks-summary" class="summary-box"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Fees -->
                <div id="fees-section" class="section">
                    <div class="section-header">
                        <h2>Fees</h2>
                    </div>
                    <div class="grid two-cols">
                        <div class="card">
                            <h3>Student Fee Setup</h3>
                            <div class="form-group">
                                <label>Student Roll</label>
                                <input type="text" id="fee-roll">
                            </div>
                            <div class="form-group">
                                <label>Total Fee</label>
                                <input type="number" id="fee-total">
                            </div>
                            <button id="fee-set-total" class="btn btn-primary full-width">Set / Update Total</button>
                            <div class="form-group">
                                <label>New Payment Amount</label>
                                <input type="number" id="fee-payment-amount">
                            </div>
                            <button id="fee-add-payment" class="btn btn-secondary full-width">Add Payment</button>
                            <p id="fee-status" class="success-text"></p>
                        </div>

                        <div class="card">
                            <h3>Fee Details</h3>
                            <div class="form-group inline">
                                <label>Roll</label>
                                <input type="text" id="fee-info-roll">
                            </div>
                            <button id="fee-show-info" class="btn btn-secondary small">Show</button>
                            <div id="fee-info-box" class="summary-box"></div>
                        </div>
                    </div>
                </div>

                <!-- Settings (Admin only) -->
                <div id="settings-section" class="section">
                    <h2>Settings</h2>
                    <div class="card">
                        <h3>System Data</h3>
                        <p class="muted">Admin can wipe all local data stored in this browser.</p>
                        <button id="btn-reset-system" class="btn btn-danger">Reset All Data (local)</button>
                        <p class="error-text small">Warning: This action cannot be undone.</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="dataModal.js"></script>
    <script src="students.js"></script>
    <script src="attendance.js"></script>
    <script src="academics.js"></script>
    <script src="fees.js"></script>
    <script src="app.js"></script>
</body>

</html>